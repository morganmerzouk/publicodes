{"version":3,"file":"assets/js/e1ab8497.7091ad6b.js","mappings":"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","sources":["webpack://website/../node_modules/@mdx-js/react/dist/esm.js","webpack://website/./docs/guides/créer-formulaire.mdx"],"sourcesContent":["import React from 'react';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nvar isFunction = function isFunction(obj) {\n  return typeof obj === 'function';\n};\n\nvar MDXContext = /*#__PURE__*/React.createContext({});\nvar withMDXComponents = function withMDXComponents(Component) {\n  return function (props) {\n    var allComponents = useMDXComponents(props.components);\n    return /*#__PURE__*/React.createElement(Component, _extends({}, props, {\n      components: allComponents\n    }));\n  };\n};\nvar useMDXComponents = function useMDXComponents(components) {\n  var contextComponents = React.useContext(MDXContext);\n  var allComponents = contextComponents;\n\n  if (components) {\n    allComponents = isFunction(components) ? components(contextComponents) : _objectSpread2(_objectSpread2({}, contextComponents), components);\n  }\n\n  return allComponents;\n};\nvar MDXProvider = function MDXProvider(props) {\n  var allComponents = useMDXComponents(props.components);\n  return /*#__PURE__*/React.createElement(MDXContext.Provider, {\n    value: allComponents\n  }, props.children);\n};\n\nvar TYPE_PROP_NAME = 'mdxType';\nvar DEFAULTS = {\n  inlineCode: 'code',\n  wrapper: function wrapper(_ref) {\n    var children = _ref.children;\n    return /*#__PURE__*/React.createElement(React.Fragment, {}, children);\n  }\n};\nvar MDXCreateElement = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var propComponents = props.components,\n      mdxType = props.mdxType,\n      originalType = props.originalType,\n      parentName = props.parentName,\n      etc = _objectWithoutProperties(props, [\"components\", \"mdxType\", \"originalType\", \"parentName\"]);\n\n  var components = useMDXComponents(propComponents);\n  var type = mdxType;\n  var Component = components[\"\".concat(parentName, \".\").concat(type)] || components[type] || DEFAULTS[type] || originalType;\n\n  if (propComponents) {\n    return /*#__PURE__*/React.createElement(Component, _objectSpread2(_objectSpread2({\n      ref: ref\n    }, etc), {}, {\n      components: propComponents\n    }));\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _objectSpread2({\n    ref: ref\n  }, etc));\n});\nMDXCreateElement.displayName = 'MDXCreateElement';\nfunction createElement (type, props) {\n  var args = arguments;\n  var mdxType = props && props.mdxType;\n\n  if (typeof type === 'string' || mdxType) {\n    var argsLength = args.length;\n    var createElementArgArray = new Array(argsLength);\n    createElementArgArray[0] = MDXCreateElement;\n    var newProps = {};\n\n    for (var key in props) {\n      if (hasOwnProperty.call(props, key)) {\n        newProps[key] = props[key];\n      }\n    }\n\n    newProps.originalType = type;\n    newProps[TYPE_PROP_NAME] = typeof type === 'string' ? type : mdxType;\n    createElementArgArray[1] = newProps;\n\n    for (var i = 2; i < argsLength; i++) {\n      createElementArgArray[i] = args[i];\n    }\n\n    return React.createElement.apply(null, createElementArgArray);\n  }\n\n  return React.createElement.apply(null, args);\n}\n\nexport { MDXContext, MDXProvider, createElement as mdx, useMDXComponents, withMDXComponents };\n","\n\n/* @jsxRuntime classic */\n/* @jsx mdx */\n/* @jsxFrag React.Fragment */\n\nimport React from 'react';\nimport { mdx } from '@mdx-js/react';\n\n\nexport const frontMatter = {\n\tsidebar_position: 1,\n\ttitle: 'Créer un formulaire'\n};\nexport const contentTitle = undefined;\nexport const metadata = {\n  \"unversionedId\": \"guides/créer-formulaire\",\n  \"id\": \"guides/créer-formulaire\",\n  \"title\": \"Créer un formulaire\",\n  \"description\": \"Publicodes permet de générer un formulaire intéractif tout autant qu’un simulateur affichant une liste de questions. Vous pouvez implémenter l’interface utilisateur la plus adaptée à votre application à partir des informations calculées par le moteur.\",\n  \"source\": \"@site/docs/guides/créer-formulaire.mdx\",\n  \"sourceDirName\": \"guides\",\n  \"slug\": \"/guides/créer-formulaire\",\n  \"permalink\": \"/docs/guides/créer-formulaire\",\n  \"draft\": false,\n  \"editUrl\": \"https://github.com/betagouv/publicodes/edit/master/website/docs/guides/créer-formulaire.mdx\",\n  \"tags\": [],\n  \"version\": \"current\",\n  \"sidebarPosition\": 1,\n  \"frontMatter\": {\n    \"sidebar_position\": 1,\n    \"title\": \"Créer un formulaire\"\n  },\n  \"sidebar\": \"tutorialSidebar\",\n  \"previous\": {\n    \"title\": \"Tutoriel\",\n    \"permalink\": \"/docs/tutoriel\"\n  },\n  \"next\": {\n    \"title\": \"Créer un paquet de règles réutilisable\",\n    \"permalink\": \"/docs/guides/model-template\"\n  }\n};\nexport const assets = {\n\n};\n\n\nexport const toc = [{\n  value: 'Questions et méta-données',\n  id: 'questions-et-méta-données',\n  level: 2\n}, {\n  value: 'Variables traversées',\n  id: 'variables-traversées',\n  level: 2\n}];\n\nconst layoutProps = {\n  toc\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <p>{`Publicodes permet de générer un formulaire intéractif tout autant qu’un simulateur affichant une liste de questions. Vous pouvez implémenter l’interface utilisateur la plus adaptée à votre application à partir des informations calculées par le moteur.`}</p>\n    <h2 {...{\n      \"id\": \"questions-et-méta-données\"\n    }}>{`Questions et méta-données`}</h2>\n    <p>{`Les questions sont définies via la création d'une règle publicodes :`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`age:\n  question: Quel âge avez-vous ?\n  type: nombre\n\n# La règle \"age\" contient la réponse à la question correspondante\npersonne majeure: age >= 18\n\nprénom:\n    question: Quel est votre prénom ?\n    type: texte\n`}</code></pre>\n    <p>{`On peut filtrer les règles publicodes pour obtenir uniquement la liste des questions :`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const engine = new Publicodes(rules)\nconst questions = engine.parsedRules.filter(\n    (rule) => rule.rawNode.question !== undefined\n)\n`}</code></pre>\n    <p>{`Vu qu'il s'agit de règles publicodes standard, on peut utiliser l'applicabilité pour déterminer la liste des questions à afficher :`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`commande:\ncommande . bière:\n    applicable si: personne majeure\n    question: Souhaitez-vous une bière ?\n    par défaut: non\n`}</code></pre>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const questionsToDisplay = questions.filter((question) =>\n    engine.evaluate({ 'est applicable': question })\n)\n`}</code></pre>\n    <admonition {...{\n      \"title\": \"Composants UI pour afficher un formulaire\",\n      \"type\": \"caution\"\n    }}><p parentName=\"admonition\">{`Nous ne proposons pas de bibliothèque de composants graphiques directement interfacés avec Publicodes. En effet sur les différents utilisateurs actuels, le besoin de personnalisation de l'interface est fort, et il n'est pas évident de déterminer quels éléments partager.`}</p><p parentName=\"admonition\">{`Vous devez donc interfacer votre UI avec le moteur Publicodes :`}</p><ul parentName=\"admonition\">\n        <li parentName=\"ul\">{`Pour lire la valeur courante : `}<inlineCode parentName=\"li\">{`engine.evaluate('age')`}</inlineCode></li>\n        <li parentName=\"ul\">{`Pour modifier la valeur suite à une saisie de l'utilisateur : `}<inlineCode parentName=\"li\">{`engine.setSituation({ age: 17 })`}</inlineCode></li>\n      </ul><p parentName=\"admonition\">{`À l’avenir, il est possible que nous exportions des fonctions utilitaires pour simplifier ce travail d’interfaçage.`}</p></admonition>\n    {/* TODO : parler du typage des règles ou référencer un guide tiers */}\n    <h2 {...{\n      \"id\": \"variables-traversées\"\n    }}>{`Variables traversées`}</h2>\n    <p>{`L'utilisation de l'applicabilité permet déjà d'afficher ou de cacher des questions en fonction des réponses précédentes. Mais pour certains formulaires par nature très dynamiques, on veut en plus pouvoir ordonner automatiquement les questions.`}</p>\n    <p>{`Là encore, l'implémentation concrète dépendra de chaque application. Mais généralement il faudra prendre en compte les dépendences entre les questions. Ainsi dans l'exemple ci-dessus, on veut d'abord déterminer si la personne est majeure avant de lui demander s'il elle veut commander une bière. Il faut donc poser la question de l'âge en premier.`}</p>\n    <p>{`Pour exploiter cette notion de dépendance des questions, on peut utiliser les `}<strong parentName=\"p\">{`variables traversées`}</strong>{`. Les variables traversées sont une méta-donnée retournée lors de l'évaluation d'une expression publicodes qui permet de connaître l'ensemble des règles qui interviennent dans son calcul.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`commande . vin:\n    applicable si:\n        toutes ces conditions:\n            - personne majeure\n            - bière = non\n    question: Voulez-vous une bouteille de rouge ?\n    par défaut: non\n`}</code></pre>\n    <p>{`On peut évaluer la règle `}<inlineCode parentName=\"p\">{`commande . vin`}</inlineCode>{` pour déterminer sa valeur actuelle ainsi que les variables utilisées dans le calcul :`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`const commandeVin = engine.evaluate('commande . vin')\nconsole.log(commandeVin.nodeValue) // false - la valeur par défaut\nconsole.log(commandeVin.traversedVariables) // [ 'personne majeure', 'bière' ]\n`}</code></pre>\n    <p>{`Les variables traversées sont retournées dans leur ordre d’apparition. Ainsi par exemple les règles référencées dans le mécanisme `}<a parentName=\"p\" {...{\n        \"href\": \"/docs/api/m%C3%A9canismes#applicable-si\"\n      }}>{`applicable si`}</a>{` apparaîtront avant celles utilisées dans le calcul de la valeur de la règle en elle-même, en effet publicodes évalue d'abord la condition avant d'évaluer le cas échéant la conséquence.`}</p>\n    <p>{`À noter que les variables traversées dépendent de la situation courante.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`# Les variables traversées lors de l'évaluation de \\`chauffage\\` dépendent\n# de la valeur courante de \\`chauffage . type\nchauffage:\n    variations:\n    - si: type = 'buche'\n        alors: type . buche . consommation * facteur . buche\n    - sinon: type . granulés . consommation * facteur . granulés\n\nchauffage . type:\n    par défaut: \"'buche'\"\n`}</code></pre>\n    {/* TODO : parler des dépendances statiques engine.rulesDependencies[dottedName] ou référencer un guide tiers sur l’arbre des dépendances */}\n    <admonition {...{\n      \"title\": \"Variables manquantes\",\n      \"type\": \"note\"\n    }}><p parentName=\"admonition\">{`Publicodes calcule également une liste de « variables manquantes ». Il s'agit d'un sous-ensemble des variables traversées filter uniquement sur les règles qui n'ont pas de formule (ou uniquement une formule par défaut).`}</p><p parentName=\"admonition\">{`Avant l'introduction des variables traversées il s'agissait de la seule meta-donnée calculée permettant de déterminer l'ordre des règles.`}</p><p parentName=\"admonition\">{`Il semble maintenant préférable de se baser sur les variables traversées, et de les filtrer sur le sous-ensemble de règles pertinent pour l'application : par exemple la liste des questions.`}</p></admonition>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","prototype","propertyIsEnumerable","call","MDXContext","useMDXComponents","components","contextComponents","allComponents","MDXProvider","props","Provider","children","TYPE_PROP_NAME","DEFAULTS","inlineCode","wrapper","_ref","MDXCreateElement","ref","propComponents","mdxType","originalType","parentName","etc","type","Component","concat","createElement","args","argsLength","createElementArgArray","Array","newProps","hasOwnProperty","displayName","frontMatter","sidebar_position","title","contentTitle","undefined","metadata","assets","toc","id","level","layoutProps","MDXLayout","MDXContent","mdx","_extends","isMDXComponent"],"sourceRoot":""}